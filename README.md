# Приложение "Шаблоны писем"

## Описание

Приложение позволяет создавать **шаблоны** для отправки e-mail писем и сохраняет их в формате **html**.
Содержит административную часть **(backend)** и страницу доступную всем пользователям **(frontend)**.

## Установка

- Склонировать данный репозиторий в рабочую директорию
- [Настроить nginx](docs/nginx.md)
- [Настроить MySQL](docs/mysql.md)
- Установить права на директорию для сохранения шаблонов в **html**:
```
chmod 0777 -R common/storage
```
- Установить пакеты из composer:
```
composer install

# без установки пакетов для тестирования и вспомогательных пакетов для разработки
composer install --no-dev

```

- Инициализировать проект:
```
./init

Затем выбрать режим работы проекта:
"боевой" (production)
"разработка" (development)
```

- Указать настройки базы данных:

Для базы проекта в `common/config/main-local.php`:
```
'db' => [
    'class' => 'yii\db\Connection',
    'dsn' => 'mysql:host=localhost;dbname=mail_templates',
    'username' => 'mail_templates',
    'password' => '123qwe',
    'charset' => 'utf8',
],
```

Идентичные для базы для запуска тестов в `common/config/test-local.php`

- Запустить миграции для баз данных:

```
./yii migrate
./yii_test migrate
```

## Создание пользователей

Создания пользователя для управления шаблонами происходит через консольную команду:
```
./yii user/create
```

Приложение предложит указать имя, email и пароль. 
После этого пользователь будет создан и сможет авторизоваться на **frontend** и **backend** разделах приложения.

## Запуск тестов

```
./vendor/bin/codecept run
```
